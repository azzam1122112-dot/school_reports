# تقرير تسويقي مفصل عن منصة «توثيق» لإدارة التقارير المدرسية

> هذا التقرير مبني على مراجعة فعلية لكود مشروع `school_reports` (Django) ووحداته الأساسية: التقارير، التذاكر/الطلبات، الإشعارات، ملفات الإنجاز، تعدد المدارس، الاشتراكات والمدفوعات، وسجل التدقيق.

---

## 1) الملخص التنفيذي
منصة «توثيق» هي نظام ويب عربي حديث يوحّد احتياجات المدرسة اليومية في مكان واحد:
- توثيق التقارير المدرسية مع مرفقات الصور والطباعة.
- إدارة الطلبات الداخلية (Ticketing) بين المعلمين والأقسام والإدارة، مع مرفقات وصور وملاحظات.
- ملف إنجاز سنوي للمعلم مع شواهد (صور) وتوليد PDF احترافي.
- إشعارات داخلية موجّهة مع تتبع القراءة والتوقيع (للتعاميم الإلزامية).
- تشغيل متعدد المدارس (Multi‑School) مع عزل واضح للبيانات حسب المدرسة.
- اشتراكات وباقات للمدارس + مدفوعات وإيصالات.

**النتيجة:** تقليل الفوضى الورقية وتشتت القنوات، رفع جودة التوثيق، وتسريع المتابعة الإدارية بدقة عالية.

---

## 2) المشكلة التي تحلها المنصة (Pain Points)
المدارس غالبًا تعاني من:
- توثيق متفرق (ورقي/واتساب/ملفات شخصية) يصعب جمعه وطباعة أدلة منه.
- صعوبة تتبع الطلبات الداخلية: من المسؤول؟ ما الحالة؟ أين المرفقات؟
- صعوبة تجهيز ملف إنجاز سنوي “مرتب ومطبوعة منه نسخة PDF”.
- غياب لوحة واضحة للصلاحيات (من يرى ماذا؟) خصوصًا مع تعدد الأقسام.
- عدم وجود سجل تدقيق للعمليات الأساسية.

---

## 3) كيف تعمل المنصة ببساطة (نظرة تشغيلية)
### أ) الدخول والهوية
- تسجيل دخول بحساب مستخدم (عادة: رقم الجوال + كلمة مرور).
- سياسات أمان تشغيلية: جلسة واحدة لكل مستخدم + تسجيل خروج تلقائي بعد الخمول.

### ب) اختيار المدرسة (لمن لديه أكثر من مدرسة)
- تدعم المنصة تعدد المدارس للحساب الواحد عبر عضويات مدرسية.
- يتم تحديد “المدرسة النشطة” داخل الجلسة لعزل البيانات وعرض التقارير/التذاكر الخاصة بها.

### ج) المسارات اليومية
- المعلم: يضيف تقريرًا، يرفق صورًا، يطبع، ينشئ طلبًا، ويتابع إشعاراته.
- مسؤول قسم: يتابع “الوارد” من الطلبات، وقد يرى تقارير القسم حسب صلاحيات المدرسة.
- مدير المدرسة: يدير المعلمين/الأقسام/أنواع التقارير، ويشرف على التقارير والاشتراك وسجل العمليات.

---

## 4) الميزات الرئيسية (Core Features)

### 4.1 التقارير المدرسية (Reports)
- إضافة تقارير بتاريخ، عنوان، وصف، وعدد مستفيدين (اختياري).
- تصنيفات ديناميكية لأنواع التقارير (Report Types) قابلة للتخصيص حسب المدرسة.
- إرفاق حتى 4 صور للتقرير مع التحقق من صحة الملفات.
- طباعة بتنسيق مناسب، مع دعم شعار المدرسة ولون طباعة مخصص.
- تحسين التشغيل: معالجة صور التقارير في الخلفية عبر مهام (Celery) لتخفيف الضغط.

**قيمة تسويقية:** “توثيق يومي مرتب + جاهز للطباعة عند الطلب”.

### 4.2 الطلبات والتذاكر (Tickets / Requests)
- إنشاء طلب بعنوان وتفاصيل، مع إمكانية ربطه بقسم داخل المدرسة.
- إسناد مستلم رئيسي (Assignee) ودعم مستلمين متعددين.
- إرفاق ملفات (PDF/صور/DOC/DOCX) بحجم مضبوط (حتى 5MB) + صور إضافية.
- ملاحظات على الطلب مع خيار “ظاهرة للمرسل” أو “ملاحظة داخلية”.
- حالات واضحة: جديد، قيد المعالجة، مكتمل، مرفوض.
- دعم مسار “دعم فني للمنصة” لإرسال التذكرة لإدارة المنصة.

**قيمة تسويقية:** “لا تضيع الطلبات… كل طلب له رقم ومسار وحالة ومرفقات”.

### 4.3 الإشعارات والتعاميم (Notifications)
- إرسال إشعارات بعنوان ورسالة مع خيار “هام”.
- استهداف مدرسة بعينها أو إرسال عام.
- تتبع القراءة لكل مستلم (Read receipts).
- دعم “تعميم إلزامي” يتطلب توقيعًا وإقرارًا (Requires signature) مع آخر موعد للتوقيع.
- دعم مرفق للإشعار (PDF/صور) وفق تحقق الملفات.

**قيمة تسويقية:** “تواصل رسمي داخل المنصة مع إثبات وصول وقراءة”.

### 4.4 ملف الإنجاز السنوي (Achievement File)
- لكل معلم ملف إنجاز سنوي مرتبط بالمدرسة والسنة الدراسية (هجري) بصيغة مضبوطة مثل: 1447-1448.
- حالات سير عمل واضحة: مسودة → بانتظار الاعتماد → مُعاد للمعلّم → معتمد.
- شواهد (صور) لكل محور/قسم داخل ملف الإنجاز.
- توليد PDF احترافي عبر WeasyPrint، مع ألوان وهوية المدرسة.

**قيمة تسويقية:** “ملف إنجاز جاهز للطباعة وPDF بدون تعب التجميع اليدوي”.

### 4.5 تعدد المدارس وعزل البيانات (Multi‑School)
- كيان School يمثل المدرسة مع خصائص: المرحلة، بنين/بنات، المدينة، شعار المدرسة، لون الطباعة.
- عزل تقارير/تذاكر/إشعارات/ملفات إنجاز حسب المدرسة النشطة.

**قيمة تسويقية:** “منصة واحدة تدير عدة مدارس بسلاسة وبعزل واضح”.

### 4.6 الصلاحيات والأدوار (Roles & Permissions)
المنصة تعكس واقع المدرسة بإدارة مرنة للأدوار، مثل:
- معلم.
- مدير مدرسة.
- مسؤول قسم.
- مشرف تقارير (عرض فقط) مع حد أقصى افتراضي لعدد الحسابات النشطة لكل مدرسة.

كما توجد طبقة “مشرف عام للمنصة” بصلاحيات مقيدة (عرض وتواصل) لضمان الأمان وعدم تجاوز الحدود.

**قيمة تسويقية:** “كل مستخدم يرى ما يحتاجه فقط”.

### 4.7 الاشتراكات والمدفوعات (Subscriptions & Payments)
- باقات اشتراك بمدة (أيام) وحد أقصى لحسابات المعلمين.
- اشتراك مدرسة بتاريخ بداية/نهاية وحالة انتهاء (Expired) واضحة.
- نظام مدفوعات مع رفع إيصال وتحويل الحالة (قيد المراجعة/مقبول/مرفوض).

**قيمة تسويقية:** “تشغيل منظم بباقة تناسب حجم المدرسة وتمنع الفوضى”.

### 4.8 سجل التدقيق (Audit Logs)
- تسجيل عمليات أساسية (إنشاء/تعديل/حذف، وتسجيل دخول/خروج عند التفعيل).
- يشمل بيانات مساعدة: المدرسة، المستخدم، الوقت، IP، وUser-Agent.

**قيمة تسويقية:** “حوكمة وشفافية… تعرف من غيّر ماذا ومتى”.

### 4.9 مشاركة آمنة (Public Share Links)
- روابط مشاركة عامة مؤقتة (Token) لتقرير أو ملف إنجاز.
- خيارات التحكم: تفعيل/تعطيل، تاريخ انتهاء، وتسجيل آخر وصول.

**قيمة تسويقية:** “مشاركة مهنية مؤقتة بدل إرسال ملفات عشوائية”.

---

## 5) نقاط التميّز (Why Us)
- تصميم عربي عملي يراعي سياق المدرسة (تقارير، أقسام، اعتمادات، طباعة).
- منظومة متكاملة: تقارير + طلبات + إشعارات + إنجاز + اشتراك.
- أداء أفضل عبر:
  - مهام خلفية لمعالجة الصور.
  - Redis ككاش عند توفره.
- قابلية تشغيل سحابية جاهزة:
  - Docker + Gunicorn + Whitenoise للملفات الثابتة.
  - دعم Postgres.
  - دعم تخزين ملفات الوسائط على Cloudflare R2 (S3-compatible) أو محليًا.

---

## 6) الأمان والاعتمادية (Security & Reliability)
بدون مبالغة تقنية، هذه أبرز نقاط الاطمئنان:
- سياسة جلسة واحدة لكل مستخدم لتقليل مشاركة الحسابات.
- تسجيل خروج تلقائي بعد فترة خمول.
- تقوية للإنتاج عبر Content Security Policy.
- Rate limiting متاح لتخفيف إساءة الاستخدام.
- تحقق ملفات المرفقات والصور قبل الحفظ.

---

## 7) نماذج استخدام جاهزة للتسويق (Use Cases)
- مدرسة تريد توثيق البرامج اليومية والأنشطة مع صور وتقارير للطباعة.
- إدارة تريد توحيد الطلبات (صيانة/احتياج/متابعة) بدل التشتت في المحادثات.
- معلم يحتاج ملف إنجاز سنوي منظم مع شواهد وPDF.
- مشرف يريد إرسال تعميم مهم مع تتبع القراءة والتوقيع.
- منصة تدير عدة مدارس وتحتاج عزلًا واضحًا للبيانات.

---

## 8) رحلة تشغيل المدرسة (Onboarding) — مختصر تنفيذي
1) إنشاء المدرسة وتحديد بياناتها الأساسية.
2) إضافة مدير المدرسة.
3) تجهيز لوحة المدير:
   - استيراد المعلمين (Excel) أو الإضافة اليدوية.
   - إنشاء الأقسام وتعيين مسؤولي الأقسام.
   - تعريف أنواع التقارير وربطها بالقسم عند الحاجة.
4) بدء التشغيل:
   - تقرير تجريبي + طباعة.
   - تذكرة تجريبية لمسار قسم.
   - إشعار تجريبي.

---

## 9) رسائل تسويقية مقترحة (Copy جاهز)
### رسالة قصيرة (Elevator Pitch)
«توثيق» منصة مدرسية تجمع التقارير والطلبات والإشعارات وملفات الإنجاز في نظام واحد… لتوثيقٍ مرتب، متابعةٍ أسرع، وطباعةٍ جاهزة متى ما احتجت.

### نقاط بيع سريعة
- تقارير مصنفة مع صور وطباعة.
- طلبات داخلية منظمة بحالة ومرفقات.
- إشعارات مع قراءة وتوقيع للتعاميم.
- ملف إنجاز سنوي مع شواهد وPDF.
- تعدد مدارس + صلاحيات مرنة + سجل تدقيق.

---

## 10) أسئلة شائعة (FAQ)
**هل المنصة مناسبة لمدرسة واحدة فقط؟**
لا، تدعم مدرسة واحدة أو عدة مدارس، مع عزل بيانات واضح.

**هل يوجد حد لعدد المعلمين؟**
يمكن ضبطه حسب الباقة (حد المعلمين في الاشتراك).

**هل يمكن استخراج ملف إنجاز PDF؟**
نعم، المنصة تولد PDF احترافي لملف الإنجاز.

**هل توجد مشاركة خارجية للتقارير/الإنجاز؟**
نعم، عبر روابط مؤقتة قابلة للتفعيل والتعطيل وبمدة صلاحية.

---

## 11) ملحق تقني مختصر (للعروض وملفات المشتريات)
- Backend: Django 4.2
- Background Jobs: Celery + django-celery-results (مع fallback عند عدم توفر broker)
- Cache/Redis: django-redis + redis
- DB: Postgres مدعوم (psycopg2-binary) + SQLite للتطوير
- PDF: WeasyPrint
- Storage: Whitenoise للـ static + دعم Cloudflare R2 للـ media (django-storages + boto3)

