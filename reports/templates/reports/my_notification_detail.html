{% extends "base.html" %}
{% load static %}

{% block title %}تفاصيل الإشعار{% endblock %}

{% block head %}
<style>
  .nd-scope{
    --nd-ink: var(--ink, #0f172a);
    --nd-muted: var(--muted, #64748b);
    --nd-line: var(--line, #e5e7eb);
    --nd-card: var(--card, #ffffff);
    --nd-soft: var(--line-2, #f1f5f9);
    --nd-shadow: 0 12px 30px rgba(2,6,23,.08);
    --nd-brand: var(--brand, #2563eb);
    --nd-brand-ghost: rgba(37,99,235,.10);
    --nd-t: var(--t-fast, .18s ease);
  }

  .nd-scope .nd-wrap{max-width:1100px;margin:0 auto;padding:18px}

  .nd-scope .nd-head{
    display:flex;align-items:flex-start;justify-content:space-between;
    gap:12px;margin-bottom:14px;flex-wrap:wrap
  }
  .nd-scope .nd-title{margin:0;font-weight:950;color:var(--nd-ink)}
  .nd-scope .nd-hint{color:var(--nd-muted);font-weight:850}

  .nd-scope .nd-card{
    background:var(--nd-card);
    border:1px solid var(--nd-line);
    border-radius:16px;
    box-shadow:var(--nd-shadow);
    overflow:hidden;
  }
  .nd-scope .nd-card-hd{
    padding:14px 16px;border-bottom:1px solid var(--nd-line);
    display:flex;align-items:center;justify-content:space-between;
    gap:10px;flex-wrap:wrap;
    background: linear-gradient(180deg, var(--nd-soft), var(--nd-card));
  }
  .nd-scope .nd-card-bd{padding:16px}

  .nd-scope .nd-meta-row{display:flex;align-items:center;gap:8px;flex-wrap:wrap}
  .nd-scope .nd-when{color:var(--nd-muted);font-weight:900}

  .nd-scope .nd-pill{
    display:inline-flex;align-items:center;gap:6px;
    padding:6px 10px;border:1px solid var(--nd-line);
    background: var(--nd-soft);
    color: var(--nd-ink);
    border-radius:999px;font-weight:950;font-size:.86rem;
    white-space:nowrap;
  }
  .nd-scope .nd-pill.important{background: rgba(239,68,68,.08); border-color: rgba(239,68,68,.20); color: #b91c1c;}

  .nd-scope .nd-body{
    line-height:1.95;
    color: var(--nd-ink);
    font-weight:850;
    background: linear-gradient(180deg, var(--nd-card), rgba(248,250,252,.55));
    border:1px solid var(--nd-line);
    border-radius:14px;
    padding:14px;
  }

  .nd-scope .nd-btn{
    padding:10px 12px;border-radius:12px;border:1px solid var(--nd-line);
    background: var(--nd-card);
    font-weight:950;text-decoration:none;color:var(--nd-ink);
    display:inline-flex;align-items:center;gap:8px;cursor:pointer;
    transition: transform var(--nd-t), box-shadow var(--nd-t), border-color var(--nd-t), background var(--nd-t);
    min-height:44px;
  }
  .nd-scope .nd-btn:hover{
    transform:translateY(-1px);
    box-shadow: 0 14px 26px rgba(2,6,23,.10);
    border-color: rgba(37,99,235,.25);
    background: rgba(248,250,252,.80);
  }

  html[data-theme="dark"] .nd-scope{
    --nd-shadow: 0 18px 46px rgba(0,0,0,.45);
  }
  html[data-theme="dark"] .nd-scope .nd-body{
    background: linear-gradient(180deg, var(--nd-card), rgba(2,6,23,.25));
  }

  @media (prefers-reduced-motion: reduce){
    .nd-scope .nd-btn{transition:none !important;}
    .nd-scope .nd-btn:hover{transform:none !important;}
  }
</style>
{% endblock %}

{% block content %}
<div class="nd-scope">
  <div class="nd-wrap" dir="rtl">
    <header class="nd-head">
      <div>
        <h1 class="nd-title">تفاصيل الإشعار</h1>
        <div class="nd-hint">عرض الرسالة كاملة</div>
      </div>
      <a class="nd-btn" href="{% url 'reports:my_notifications' %}">
        <i class="fa-solid fa-arrow-right" aria-hidden="true"></i> رجوع إلى إشعاراتي
      </a>
    </header>

    <section class="nd-card" aria-label="الإشعار">
      <div class="nd-card-hd">
        <div class="nd-meta-row">
          <strong style="font-weight:950">{{ n.title|default:"رسالة" }}</strong>
          {% if n.is_important %}<span class="nd-pill important">هام</span>{% endif %}
        </div>
        <div class="nd-when">{% if r.created_at %}{{ r.created_at|date:"Y-m-d H:i" }}{% endif %}</div>
      </div>

      <div class="nd-card-bd">
        {% if body %}
          <div class="nd-body">{{ body|linebreaksbr }}</div>
        {% else %}
          <div class="nd-hint">لا يوجد محتوى نصي.</div>
        {% endif %}

        <div style="display:flex;gap:8px;flex-wrap:wrap;margin-top:12px">
          <span class="nd-pill">
            المرسِل:
            {% if n.created_by %}
              {% firstof n.created_by.name n.created_by.phone n.created_by.username "الإدارة" %}
              {% if n.created_by.role %} — {% firstof n.created_by.role.name n.created_by.role.slug %}{% endif %}
            {% else %}
              الإدارة
            {% endif %}
          </span>
          {% if r.is_read %}<span class="nd-pill">الحالة: مقروء</span>{% else %}<span class="nd-pill">الحالة: غير مقروء</span>{% endif %}
          {% if r.read_at %}<span class="nd-pill">وقت القراءة: {{ r.read_at|date:"Y-m-d H:i" }}</span>{% endif %}
        </div>
      </div>
    </section>
  </div>
</div>
{% endblock %}
