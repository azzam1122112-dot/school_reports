{# reports/templates/reports/school_profile.html #}
{% extends "base.html" %}

{% block title %}Ø¨Ø±ÙˆÙØ§ÙŠÙ„ Ø§Ù„Ù…Ø¯Ø±Ø³Ø©{% endblock %}

{% block head %}
<style>
  /* =========================================================
     School Profile â€” Scoped page styles only
     - Ø¨Ø¯ÙˆÙ† Ù„Ù…Ø³ .btn / .card Ø§Ù„Ø¹Ø§Ù…Ø©
     - Ù…ØªÙˆØ§ÙÙ‚ Ù…Ø¹ data-theme (dark/light)
     ========================================================= */

  .schoolp-page{max-width:1100px;margin:0 auto;padding:clamp(10px,2.2vw,18px)}
  .schoolp-shell{
    background:var(--card);
    border:1px solid var(--line);
    border-radius:18px;
    box-shadow:var(--shadow);
    overflow:hidden;
  }

  /* Header */
  .schoolp-head{
    padding:clamp(16px,2.2vw,22px) clamp(16px,3vw,26px);
    background:
      radial-gradient(900px 220px at 18% 0%, rgba(37,99,235,.18), transparent 55%),
      radial-gradient(700px 220px at 85% 90%, rgba(16,185,129,.14), transparent 60%),
      linear-gradient(135deg, rgba(37,99,235,.92), rgba(59,130,246,.86));
    color:#fff;
    border-bottom:1px solid rgba(255,255,255,.14);
  }
  .schoolp-head-top{
    display:flex;
    align-items:flex-start;
    justify-content:space-between;
    gap:12px;
    flex-wrap:wrap
  }
  .schoolp-title{
    margin:0;
    font-weight:950;
    font-size:clamp(1.15rem,2.4vw,1.6rem);
    display:flex;
    align-items:center;
    gap:10px;
    letter-spacing:-.2px;
  }
  .schoolp-sub{margin:6px 0 0;opacity:.95;font-weight:850;line-height:1.65}

  .schoolp-actions{
    display:flex;
    gap:10px;
    flex-wrap:wrap;
    align-items:center;
    justify-content:flex-end
  }
  .schoolp-actions .btn{border-radius:14px}
  .schoolp-actions .btn-outline{
    background:rgba(255,255,255,.10);
    border:1px solid rgba(255,255,255,.20);
    color:#fff;
  }
  .schoolp-actions .btn-outline:hover{background:rgba(255,255,255,.16)}

  /* Body */
  .schoolp-body{padding:clamp(14px,2.6vw,22px)}
  .schoolp-grid{display:grid;gap:14px}
  @media(min-width:980px){.schoolp-grid{grid-template-columns:1.15fr .85fr}}

  .schoolp-cardish{
    background:var(--card);
    border:1px solid var(--line);
    border-radius:18px;
    box-shadow:var(--shadow-sm);
    padding:14px;
  }

  .schoolp-block-title{
    display:flex;
    align-items:center;
    justify-content:space-between;
    gap:10px;
    margin:0 0 10px;
    font-weight:950;
    color:var(--ink);
  }
  .schoolp-block-title small{color:var(--muted);font-weight:850}

  .schoolp-rows{display:grid;gap:10px}
  .schoolp-row{
    display:flex;
    align-items:center;
    justify-content:space-between;
    gap:12px;
    padding:10px 12px;
    border-radius:14px;
    border:1px solid var(--line);
    background:rgba(248,250,252,.65);
  }
  html[data-theme="dark"] .schoolp-row{background:rgba(255,255,255,.03)}
  .schoolp-row span{color:var(--muted);font-weight:900}
  .schoolp-row b{color:var(--ink);font-weight:950}
  .schoolp-mono{
    font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace
  }

  .schoolp-status{
    margin-top:10px;
    display:flex;
    gap:10px;
    align-items:center;
    flex-wrap:wrap;
  }

  /* KPIs */
  .schoolp-kpis{display:grid;gap:12px}
  @media(min-width:700px){.schoolp-kpis{grid-template-columns:repeat(4,1fr)}}
  .schoolp-kpi{
    background:var(--card);
    border:1px solid var(--line);
    border-radius:16px;
    box-shadow:var(--shadow-sm);
    padding:14px;
    display:flex;
    align-items:center;
    justify-content:space-between;
    gap:10px;
  }
  .schoolp-kpi .num{font-weight:950;font-size:1.35rem;color:var(--brand)}
  .schoolp-kpi .lbl{color:var(--muted);font-weight:850;margin-top:2px}
  .schoolp-kpi-ico{
    width:44px;height:44px;border-radius:14px;
    display:grid;place-items:center;
    font-weight:950;
    border:1px solid rgba(15,23,42,.06);
    background:rgba(37,99,235,.10);
    color:var(--brand);
    flex:0 0 auto;
  }
  html[data-theme="dark"] .schoolp-kpi-ico{border-color:rgba(148,163,184,.14)}

  /* Lists */
  .schoolp-two{display:grid;gap:14px}
  @media(min-width:980px){.schoolp-two{grid-template-columns:1fr 1fr}}
  .schoolp-list{margin:0;padding-right:18px}
  .schoolp-list li{margin:6px 0;color:var(--ink);font-weight:850}
  .schoolp-muted{color:var(--muted);font-weight:900}

  @media(max-width:520px){
    .schoolp-actions{width:100%}
    .schoolp-actions .btn{width:100%;justify-content:center}
  }
</style>
{% endblock %}

{% block content %}
<div class="schoolp-page" dir="rtl">
  <div class="schoolp-shell">
    <div class="schoolp-head">
      <div class="schoolp-head-top">
        <div>
          <h1 class="schoolp-title">
            <i class="fa-solid fa-id-badge" aria-hidden="true"></i>
            Ø¨Ø±ÙˆÙØ§ÙŠÙ„ Ø§Ù„Ù…Ø¯Ø±Ø³Ø©
          </h1>
          <p class="schoolp-sub">Ù†Ø¸Ø±Ø© Ø¹Ø§Ù…Ø© Ø¹Ù„Ù‰ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø¯Ø±Ø³Ø© ÙˆØ¥Ø­ØµØ§Ø¦ÙŠØ§ØªÙ‡Ø§.</p>
        </div>

        <div class="schoolp-actions">
          <a href="{% url 'reports:schools_admin_list' %}" class="btn btn-outline">
            <i class="fa-solid fa-arrow-right" aria-hidden="true"></i>
            Ø¹ÙˆØ¯Ø© Ù„Ù„Ù‚Ø§Ø¦Ù…Ø©
          </a>
        </div>
      </div>
    </div>

    <div class="schoolp-body">
      <div class="schoolp-grid">
        <!-- Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø¯Ø±Ø³Ø© -->
        <div class="schoolp-cardish">
          <div class="schoolp-block-title">
            <span>Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø¯Ø±Ø³Ø©</span>
            <small>
              {% if school.code %}
                <span class="schoolp-mono">#{{ school.code }}</span>
              {% else %}
                â€”
              {% endif %}
            </small>
          </div>

          <div class="schoolp-rows">
            <div class="schoolp-row"><span>Ø§Ø³Ù… Ø§Ù„Ù…Ø¯Ø±Ø³Ø©</span><b>{{ school.name }}</b></div>
            <div class="schoolp-row"><span>Ø§Ù„Ù…Ø±Ø­Ù„Ø©</span><b>{{ school.get_stage_display }}</b></div>
            <div class="schoolp-row"><span>Ø¨Ù†ÙŠÙ† / Ø¨Ù†Ø§Øª</span><b>{{ school.get_gender_display }}</b></div>
            <div class="schoolp-row"><span>Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©</span><b>{{ school.city|default:"-" }}</b></div>
            <div class="schoolp-row"><span>Ø±Ù‚Ù… Ø§Ù„Ø¬ÙˆØ§Ù„</span><b class="schoolp-mono">{{ school.phone|default:"-" }}</b></div>
          </div>

          <div class="schoolp-status">
            {% if school.is_active %}
              <span class="badge success">Ù†Ø´Ø·Ø©</span>
            {% else %}
              <span class="badge danger">Ù…ÙˆÙ‚ÙˆÙØ©</span>
            {% endif %}
          </div>
        </div>

        <!-- ØªÙØ§ØµÙŠÙ„ Ø§Ù„ØªØ°Ø§ÙƒØ± -->
        <div class="schoolp-cardish">
          <div class="schoolp-block-title">
            <span>ØªÙØ§ØµÙŠÙ„ Ø§Ù„ØªØ°Ø§ÙƒØ±</span>
            <small>Ù…Ù„Ø®Øµ Ø§Ù„Ø­Ø§Ù„Ø©</small>
          </div>

          <div class="schoolp-rows">
            <div class="schoolp-row"><span>Ù…ÙØªÙˆØ­Ø© / ØªØ­Øª Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬Ø©</span><b>{{ tickets_open|default:"0" }}</b></div>
            <div class="schoolp-row"><span>Ù…ØºÙ„Ù‚Ø©</span><b>{{ tickets_done|default:"0" }}</b></div>
            <div class="schoolp-row"><span>Ù…Ø±ÙÙˆØ¶Ø©</span><b>{{ tickets_rejected|default:"0" }}</b></div>
          </div>
        </div>
      </div>

      <div style="height:14px"></div>

      <!-- KPIs -->
      <div class="schoolp-kpis" aria-label="Ù…Ø¤Ø´Ø±Ø§Øª Ø³Ø±ÙŠØ¹Ø©">
        <div class="schoolp-kpi">
          <div>
            <div class="num">{{ reports_count|default:"0" }}</div>
            <div class="lbl">Ø¹Ø¯Ø¯ Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ±</div>
          </div>
          <div class="schoolp-kpi-ico" aria-hidden="true">ğŸ“„</div>
        </div>
        <div class="schoolp-kpi">
          <div>
            <div class="num">{{ tickets_total|default:"0" }}</div>
            <div class="lbl">Ø§Ù„ØªØ°Ø§ÙƒØ± (Ø§Ù„ÙƒÙ„)</div>
          </div>
          <div class="schoolp-kpi-ico" aria-hidden="true">ğŸŸï¸</div>
        </div>
        <div class="schoolp-kpi">
          <div>
            <div class="num">{{ departments_count|default:"0" }}</div>
            <div class="lbl">Ø§Ù„Ø£Ù‚Ø³Ø§Ù…</div>
          </div>
          <div class="schoolp-kpi-ico" aria-hidden="true">ğŸ·ï¸</div>
        </div>
        <div class="schoolp-kpi">
          <div>
            <div class="num">{{ teachers_count|default:"0" }}</div>
            <div class="lbl">{{ SCHOOL_TEACHERS_OBJ_LABEL|default:"Ø§Ù„Ù…Ø¹Ù„Ù‘Ù…ÙŠÙ†" }}</div>
          </div>
          <div class="schoolp-kpi-ico" aria-hidden="true">ğŸ‘©â€ğŸ«</div>
        </div>
      </div>

      <div style="height:14px"></div>

      <!-- Lists -->
      <div class="schoolp-two">
        <div class="schoolp-cardish">
          <div class="schoolp-block-title">
            <span>Ø£Ù…Ø«Ù„Ø© Ø£Ù‚Ø³Ø§Ù…</span>
            <small>Ø¨Ø­Ø¯ Ø£Ù‚ØµÙ‰ 20</small>
          </div>
          {% if departments %}
            <ul class="schoolp-list">
              {% for d in departments %}
                <li>{{ d.name }}</li>
              {% endfor %}
            </ul>
          {% else %}
            <div class="schoolp-muted">Ù„Ø§ ØªÙˆØ¬Ø¯ Ø£Ù‚Ø³Ø§Ù… Ù„Ø¹Ø±Ø¶Ù‡Ø§.</div>
          {% endif %}
        </div>

        <div class="schoolp-cardish">
          <div class="schoolp-block-title">
            <span>Ø£Ù…Ø«Ù„Ø© Ù…Ø¹Ù„Ù…ÙŠÙ†</span>
            <small>Ø¨Ø­Ø¯ Ø£Ù‚ØµÙ‰ 20</small>
          </div>
          {% if teachers %}
            <ul class="schoolp-list">
              {% for t in teachers %}
                <li>{{ t.name }}</li>
              {% endfor %}
            </ul>
          {% else %}
            <div class="schoolp-muted">Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ù…Ø¹Ù„Ù…ÙŠÙ† Ù„Ø¹Ø±Ø¶Ù‡Ù….</div>
          {% endif %}
        </div>
      </div>

    </div>
  </div>
</div>
{% endblock %}
