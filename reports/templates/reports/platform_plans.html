{% extends "base.html" %}
{% block title %}ุฎุทุท ุงูุงุดุชุฑุงู{% endblock %}

{% block content %}
<div class="container" dir="rtl">
  <div class="page-head">
    <div>
      <h1 class="page-title">ุฎุทุท ุงูุงุดุชุฑุงู</h1>
      <p class="page-subtitle">ุฅุฏุงุฑุฉ ุจุงูุงุช ุงูุฃุณุนุงุฑ ุงููุชุงุญุฉ ูููุฏุงุฑุณ.</p>
    </div>
    <div style="display:flex;gap:10px;flex-wrap:wrap">
      <a href="{% url 'reports:platform_plan_add' %}" class="btn btn-primary">ุฅุถุงูุฉ ุฎุทุฉ ุฌุฏูุฏุฉ</a>
      <a href="{% url 'reports:platform_admin_dashboard' %}" class="btn btn-outline">ุนูุฏุฉ ูููุญุฉ ุงูููุตุฉ</a>
    </div>
  </div>

  <div class="cards" style="display:grid;grid-template-columns:repeat(auto-fill, minmax(280px, 1fr));">
    {% for plan in plans %}
    <div class="card">
      <div class="row-between" style="align-items:flex-start">
        <div>
          <div style="font-weight:950;font-size:1.08rem">{{ plan.name }}</div>
          <div class="muted" style="font-weight:850;margin-top:4px">โฑ๏ธ ุงููุฏุฉ: {{ plan.days_duration }} ููู</div>
          <div class="muted" style="font-weight:850;margin-top:4px">
            ๐ฅ ุญุฏ ุงููุนูููู:
            {% if plan.max_teachers and plan.max_teachers > 0 %}
              {{ plan.max_teachers }}
            {% else %}
              ุบูุฑ ูุญุฏูุฏ
            {% endif %}
          </div>
        </div>
        {% if plan.is_active %}
          <span class="badge success">ูุนุงู</span>
        {% else %}
          <span class="badge">ุบูุฑ ูุนุงู</span>
        {% endif %}
      </div>

      <div style="font-size:1.55rem;font-weight:950;color:var(--brand);margin-top:12px">
        {{ plan.price }} ุฑูุงู
      </div>

      <div class="muted" style="margin-top:10px;font-weight:850;min-height:44px">
        {{ plan.description|truncatechars:100 }}
      </div>

      <div style="margin-top:14px">
        <a href="{% url 'reports:platform_plan_edit' plan.id %}" class="btn btn-outline btn-block">ุชุนุฏูู ุงูุฎุทุฉ</a>
        <form method="post" action="{% url 'reports:platform_plan_delete' plan.id %}" style="margin-top:10px">
          {% csrf_token %}
          <input type="hidden" name="next" value="{{ request.get_full_path }}">
          <button type="submit" class="btn btn-danger btn-block" onclick="return confirm('ูู ุฃูุช ูุชุฃูุฏ ูู ุญุฐู ูุฐู ุงูุฎุทุฉุ')">ุญุฐู ุงูุฎุทุฉ</button>
        </form>
      </div>
    </div>
    {% empty %}
    <div class="card" style="grid-column:1/-1;text-align:center" class="muted">
      ูุง ุชูุฌุฏ ุฎุทุท ุงุดุชุฑุงู ูุถุงูุฉ.
    </div>
    {% endfor %}
  </div>
</div>
{% endblock %}
