{% extends "base.html" %}
{% block title %}Ù„ÙˆØ­Ø© Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ù†ØµØ©{% endblock %}

{% block head %}
<style>
  /* âœ… Scoped ÙÙ‚Ø· Ù„Ù‡Ø°Ù‡ Ø§Ù„ØµÙØ­Ø© â€” Ø¨Ø¯ÙˆÙ† Ù„Ù…Ø³ :root */
  .platform-admin{
    --pa-brand: var(--brand, #2563eb);
    --pa-accent: var(--accent, #10b981);
    --pa-danger: var(--danger, #ef4444);
    --pa-ink: var(--ink, #0f172a);
    --pa-muted: var(--muted, #64748b);
    --pa-line: var(--line-2, var(--line, #e5e7eb));
    --pa-card: var(--card, #fff);
    --pa-shadow: var(--shadow, 0 14px 36px rgba(2,6,23,.10));
  }

  /* Hero: Ø£Ù‚Ù„ ÙØ±Ø§ØºØ§Øª + Ø´ÙƒÙ„ Ø§Ø­ØªØ±Ø§ÙÙŠ */
  .platform-admin .page-hero{
    padding: 14px 18px;
    margin-top: 10px;
    margin-bottom: 10px;
    border: none;
    background:
      radial-gradient(900px 240px at 20% 0%, rgba(37,99,235,.22), transparent 55%),
      radial-gradient(700px 260px at 85% 75%, rgba(16,185,129,.16), transparent 60%),
      linear-gradient(135deg, rgba(37,99,235,.96), rgba(14,165,233,.88));
    color:#fff;
  }

  .platform-admin .page-head{gap:10px}

  /* Badge */
  .platform-admin .hero-badge{
    background: rgba(255,255,255,.14);
    border: 1px solid rgba(255,255,255,.22);
    backdrop-filter: blur(10px);
  }
  .platform-admin .hero-ava{
    background: rgba(255,255,255,.92);
    color: var(--pa-brand);
    font-weight: 950;
  }

  /* KPI spacing */
  .platform-admin .kpi-grid{
    margin-top: 12px;
  }
  .platform-admin .kpi{
    box-shadow: var(--pa-shadow);
  }

  /* Actions */
  .platform-admin .actions-grid{
    display:grid;
    gap:12px;
    margin-top:14px;
  }
  @media(min-width: 900px){
    .platform-admin .actions-grid{grid-template-columns:1fr 1fr}
  }

  .platform-admin .tile{
    display:flex;
    gap:12px;
    align-items:center;
    text-decoration:none;
    color: inherit;
    padding: 14px;
    transition: var(--t, all .2s ease);
  }
  .platform-admin .tile:hover{
    background: rgba(37,99,235,.04);
    border-color: rgba(37,99,235,.20);
    transform: translateY(-1px);
  }

  .platform-admin .tile .ico{
    width:46px;height:46px;
    border-radius: 14px;
    display:grid;
    place-items:center;
    font-weight: 950;
    border: 1px solid rgba(15,23,42,.06);
    background: rgba(255,255,255,.70);
    color: var(--pa-brand);
    flex: 0 0 auto;
  }
  html[data-theme="dark"] .platform-admin .tile .ico{
    background: rgba(255,255,255,.06);
    border-color: rgba(148,163,184,.18);
  }

  .platform-admin .tile .t-title{
    margin:0;
    font-weight:950;
    color: var(--pa-ink);
    font-size: 1.02rem;
  }
  .platform-admin .tile .t-sub{
    margin-top:4px;
    color: var(--pa-muted);
    font-weight: 850;
  }

  /* Mobile */
  @media(max-width:520px){
    .platform-admin .page-hero{padding:14px}
    .platform-admin .actions-grid{grid-template-columns:1fr}
    .platform-admin .tile{align-items:flex-start}
  }
</style>
{% endblock %}

{% block content %}
<div class="container platform-admin" dir="rtl">

  <section class="card page-hero" aria-label="Ø±Ø£Ø³ Ù„ÙˆØ­Ø© Ø§Ù„Ù…Ù†ØµØ©">
    <div class="page-head" style="margin:0">
      <div>
        <h1 class="page-title" style="color:#fff">Ù„ÙˆØ­Ø© Ù…Ø¯ÙŠØ± Ø§Ù„Ù†Ø¸Ø§Ù…</h1>
        <p class="page-subtitle" style="color:rgba(255,255,255,.92)">
          Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø¹Ø§Ù…Ø© ÙˆØ¥Ø¬Ø±Ø§Ø¡Ø§Øª Ø®Ø§ØµØ© Ø¨Ø§Ù„Ù…Ø´Ø±Ù Ø§Ù„Ø¹Ø§Ù… ÙÙ‚Ø·.
        </p>
      </div>

      <div class="hero-badge" title="Ù…Ø³ØªØ®Ø¯Ù… Ø­Ø§Ù„ÙŠ">
        {% firstof request.user.name request.user.phone "System Admin" as display_name %}
        <div class="hero-ava">{{ display_name|slice:":1" }}</div>
        <div>
          <div style="font-weight:950;line-height:1">{{ display_name }}</div>
          <div style="opacity:.92;font-weight:900;font-size:.85rem;margin-top:3px">Ù…Ø´Ø±Ù Ø¹Ø§Ù…</div>
        </div>
      </div>
    </div>
  </section>

  <section class="kpi-grid" aria-label="Ù…Ø¤Ø´Ø±Ø§Øª Ø³Ø±ÙŠØ¹Ø©">
    <div class="kpi">
      <div>
        <div class="num">{{ platform_schools_active }}</div>
        <div class="lbl">Ù…Ø¯Ø§Ø±Ø³ Ù†Ø´Ø·Ø©</div>
      </div>
      <div class="kpi-ico ok">ğŸ«</div>
    </div>

    <div class="kpi">
      <div>
        <div class="num">{{ platform_schools_total }}</div>
        <div class="lbl">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø¯Ø§Ø±Ø³</div>
      </div>
      <div class="kpi-ico info">ğŸ·ï¸</div>
    </div>

    <div class="kpi">
      <div>
        <div class="num">{{ subscriptions_expiring_soon }}</div>
        <div class="lbl">ØªÙ†ØªÙ‡ÙŠ Ù‚Ø±ÙŠØ¨Ø§Ù‹</div>
      </div>
      <div class="kpi-ico warn">â³</div>
    </div>

    <div class="kpi">
      <div>
        <div class="num">{{ subscriptions_expired }}</div>
        <div class="lbl">Ù…Ù†ØªÙ‡ÙŠØ©</div>
      </div>
      <div class="kpi-ico danger">â›”</div>
    </div>

    <div class="kpi">
      <div>
        <div class="num">{{ pending_payments }}</div>
        <div class="lbl">Ù…Ø¯ÙÙˆØ¹Ø§Øª Ù…Ø¹Ù„Ù‘Ù‚Ø©</div>
      </div>
      <div class="kpi-ico warn">ğŸ’³</div>
    </div>

    <div class="kpi">
      <div>
        <div class="num">{{ total_revenue }}</div>
        <div class="lbl">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯Ø§Øª</div>
      </div>
      <div class="kpi-ico ok">ğŸ’°</div>
    </div>

    <div class="kpi">
      <div>
        <div class="num">{{ tickets_open }}</div>
        <div class="lbl">ØªØ°Ø§ÙƒØ± Ø¯Ø¹Ù… ÙÙ†ÙŠ</div>
      </div>
      <div class="kpi-ico info">ğŸ§</div>
    </div>

    <div class="kpi">
      <div>
        <div class="num">{{ reports_count }}</div>
        <div class="lbl">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ±</div>
      </div>
      <div class="kpi-ico info">ğŸ“„</div>
    </div>
  </section>

  <section class="actions-grid" aria-label="Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª Ù…Ø¯ÙŠØ± Ø§Ù„Ù†Ø¸Ø§Ù…">
    <a class="card tile" href="{% url 'reports:schools_admin_list' %}">
      <div class="ico">ğŸ«</div>
      <div>
        <div class="t-title">Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø¯Ø§Ø±Ø³</div>
        <div class="t-sub">Ø¥Ù†Ø´Ø§Ø¡/ØªØ¹Ø¯ÙŠÙ„/Ø­Ø°Ù Ø§Ù„Ù…Ø¯Ø§Ø±Ø³ ÙˆØªØ¹ÙŠÙŠÙ† Ù…Ø¯Ø±Ø§Ø¡ Ù„Ù‡Ø§</div>
      </div>
    </a>

    <a class="card tile" href="{% url 'reports:school_managers_list' %}">
      <div class="ico">ğŸ‘¨â€ğŸ’¼</div>
      <div>
        <div class="t-title">Ù…Ø¯Ø±Ø§Ø¡ Ø§Ù„Ù…Ø¯Ø§Ø±Ø³</div>
        <div class="t-sub">Ø¥Ù†Ø´Ø§Ø¡/ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ù…Ø¯Ø±Ø§Ø¡ ÙˆØ±Ø¨Ø·Ù‡Ù… Ø¨Ø§Ù„Ù…Ø¯Ø§Ø±Ø³</div>
      </div>
    </a>

    <a class="card tile" href="{% url 'reports:platform_subscriptions_list' %}">
      <div class="ico">ğŸ“…</div>
      <div>
        <div class="t-title">Ø§Ù„Ø§Ø´ØªØ±Ø§ÙƒØ§Øª</div>
        <div class="t-sub">ØªØ¬Ø¯ÙŠØ¯ ÙˆØªØ¹Ø¯ÙŠÙ„ Ø§Ø´ØªØ±Ø§ÙƒØ§Øª Ø§Ù„Ù…Ø¯Ø§Ø±Ø³</div>
      </div>
    </a>

    <a class="card tile" href="{% url 'reports:platform_plans_list' %}">
      <div class="ico">ğŸ“</div>
      <div>
        <div class="t-title">Ø®Ø·Ø· Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ</div>
        <div class="t-sub">Ø¥Ø¶Ø§ÙØ© ÙˆØªØ¹Ø¯ÙŠÙ„ Ø¨Ø§Ù‚Ø§Øª Ø§Ù„Ø£Ø³Ø¹Ø§Ø±</div>
      </div>
    </a>

    <a class="card tile" href="{% url 'reports:platform_payments_list' %}">
      <div class="ico">ğŸ’°</div>
      <div>
        <div class="t-title">Ø§Ù„Ù…Ø§Ù„ÙŠØ© ÙˆØ§Ù„Ù…Ø¯ÙÙˆØ¹Ø§Øª</div>
        <div class="t-sub">Ù…Ø±Ø§Ø¬Ø¹Ø© Ø§Ù„Ù…Ø¯ÙÙˆØ¹Ø§Øª ÙˆØªØ£ÙƒÙŠØ¯ Ø§Ù„ØªØ­ÙˆÙŠÙ„Ø§Øª</div>
      </div>
    </a>

    <a class="card tile" href="{% url 'reports:platform_tickets_list' %}">
      <div class="ico">ğŸ§</div>
      <div>
        <div class="t-title">Ø§Ù„Ø¯Ø¹Ù… Ø§Ù„ÙÙ†ÙŠ</div>
        <div class="t-sub">Ù…ØªØ§Ø¨Ø¹Ø© ØªØ°Ø§ÙƒØ± Ø§Ù„Ø¯Ø¹Ù… ÙˆØ§Ù„Ø±Ø¯ Ø¹Ù„ÙŠÙ‡Ø§</div>
      </div>
    </a>

    <a class="card tile" href="{% url 'reports:admin_dashboard' %}">
      <div class="ico">ğŸ“Š</div>
      <div>
        <div class="t-title">Ù„ÙˆØ­Ø© Ù…Ø¯Ø±Ø§Ø¡ Ø§Ù„Ù…Ø¯Ø§Ø±Ø³</div>
        <div class="t-sub">Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ù„Ù„ÙˆØ­Ø© Ù…Ø¯ÙŠØ± Ù…Ø¯Ø±Ø³Ø© (Ø­Ø³Ø¨ Ø§Ù„Ù…Ø¯Ø±Ø³Ø© Ø§Ù„Ù†Ø´Ø·Ø©)</div>
      </div>
    </a>

    <a class="card tile" href="{% url 'admin:index' %}">
      <div class="ico">âš™ï¸</div>
      <div>
        <div class="t-title">Ù„ÙˆØ­Ø© Django Ø§Ù„Ø¥Ø¯Ø§Ø±ÙŠØ©</div>
        <div class="t-sub">Ø¥Ø¯Ø§Ø±Ø© Ù…ØªÙ‚Ø¯Ù…Ø© Ù„Ù„Ø¬Ø¯Ø§ÙˆÙ„ ÙˆØ§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª</div>
      </div>
    </a>
  </section>

</div>
{% endblock %}
