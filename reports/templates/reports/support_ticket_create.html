{% extends "base.html" %}
{% load static %}
{% block title %}Ø·Ù„Ø¨ Ø¯Ø¹Ù… ÙÙ†ÙŠ Ø¬Ø¯ÙŠØ¯{% endblock %}

{% block head %}
<style>
  .ticket-page{max-width:800px;margin:0 auto;padding:20px}
  .ticket-card{background:#fff;border:1px solid #e5e7eb;border-radius:16px;padding:24px;box-shadow:0 4px 12px rgba(0,0,0,0.05)}
  .form-group{margin-bottom:16px}
  .form-group label{display:block;font-weight:900;margin-bottom:8px;color:#374151}
  .form-control{width:100%;padding:12px;border:1px solid #d1d5db;border-radius:8px;font-size:1rem}
  .form-control:focus{outline:none;border-color:#2563eb;box-shadow:0 0 0 3px rgba(37,99,235,0.1)}
  .btn-submit{background:#2563eb;color:#fff;padding:12px 24px;border:none;border-radius:8px;font-weight:900;cursor:pointer;width:100%}
  .btn-submit:hover{background:#1d4ed8}
  .btn-submit:disabled{opacity:.75;cursor:not-allowed}
  .err{color:#dc2626;font-size:0.9em;margin-top:6px;font-weight:800}
  .alert{background:#fee2e2;color:#b91c1c;padding:12px;border-radius:10px;margin-bottom:18px;font-weight:900}
</style>
{% endblock %}

{% block content %}
<div class="ticket-page" dir="rtl">
  <div class="ticket-card">
    <h1 style="margin-top:0;margin-bottom:14px;color:#111827;display:flex;align-items:center;gap:10px">
      <span style="font-size:1.5em">ğŸ§</span> Ø·Ù„Ø¨ Ø¯Ø¹Ù… ÙÙ†ÙŠ Ù„Ù„Ù…Ù†ØµØ©
    </h1>
    <p style="color:#6b7280;margin-bottom:24px;font-weight:700">
      Ø§Ø³ØªØ®Ø¯Ù… Ù‡Ø°Ø§ Ø§Ù„Ù†Ù…ÙˆØ°Ø¬ Ù„Ù„ØªÙˆØ§ØµÙ„ Ù…Ø¹ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ù†ØµØ© Ø¨Ø®ØµÙˆØµ Ø§Ù„Ù…Ø´Ø§ÙƒÙ„ Ø§Ù„ØªÙ‚Ù†ÙŠØ© Ø£Ùˆ Ø§Ù„Ø§Ø³ØªÙØ³Ø§Ø±Ø§Øª Ø§Ù„Ø¹Ø§Ù…Ø© Ø­ÙˆÙ„ Ø§Ù„Ù†Ø¸Ø§Ù….
    </p>

    <form method="post" enctype="multipart/form-data" id="supportForm" novalidate>
      {% csrf_token %}

      {% if form.non_field_errors %}
        <div class="alert">{{ form.non_field_errors }}</div>
      {% elif form.errors %}
        <div class="alert">ÙŠØ±Ø¬Ù‰ ØªØµØ­ÙŠØ­ Ø§Ù„Ø£Ø®Ø·Ø§Ø¡ Ø£Ø¯Ù†Ø§Ù‡.</div>
      {% endif %}

      <div class="form-group">
        <label for="{{ form.title.id_for_label }}">Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ø·Ù„Ø¨</label>
        {{ form.title }}
        {% if form.title.errors %}<div class="err">{{ form.title.errors.0 }}</div>{% endif %}
      </div>

      <div class="form-group">
        <label for="{{ form.body.id_for_label }}">ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ù…Ø´ÙƒÙ„Ø©</label>
        {{ form.body }}
        {% if form.body.errors %}<div class="err">{{ form.body.errors.0 }}</div>{% endif %}
      </div>

      <div class="form-group">
        <label for="{{ form.attachment.id_for_label }}">Ù…Ø±ÙÙ‚ (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)</label>
        {# Ù„Ùˆ ØªÙ‚Ø¯Ø± Ø¹Ø¯Ù‘Ù„ widget ÙÙŠ Ø§Ù„ÙÙˆØ±Ù… Ø£ÙØ¶Ù„ØŒ Ù„ÙƒÙ† Ù‡Ù†Ø§ ÙØ§Ù„Ø¨Ø§Ùƒ Ø¨Ø³ÙŠØ· Ø¥Ù† ÙƒØ§Ù† input file #}
        {{ form.attachment }}
        <div style="font-size:0.85em;color:#6b7280;margin-top:6px;font-weight:700">
          ÙŠÙ…ÙƒÙ†Ùƒ Ø¥Ø±ÙØ§Ù‚ ØµÙˆØ±Ø© ÙÙ‚Ø· (JPG Ø£Ùˆ PNG) Ù„Ø´Ø±Ø­ Ø§Ù„Ù…Ø´ÙƒÙ„Ø©.
        </div>
        {% if form.attachment.errors %}<div class="err">{{ form.attachment.errors.0 }}</div>{% endif %}
      </div>

      <button type="submit" class="btn-submit" id="submitBtn">Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨</button>
    </form>
  </div>
</div>

<script>
  (function(){
    const form = document.getElementById('supportForm');
    const btn = document.getElementById('submitBtn');
    if(!form || !btn) return;

    form.addEventListener('submit', function(){
      btn.disabled = true;
      btn.textContent = 'Ø¬Ø§Ø±Ù Ø§Ù„Ø¥Ø±Ø³Ø§Ù„â€¦';
    });
  })();
</script>
{% endblock %}
