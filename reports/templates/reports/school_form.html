{% extends "base.html" %}
{% block title %}{% if mode == 'edit' %}تعديل مدرسة{% else %}إنشاء مدرسة جديدة{% endif %}{% endblock %}

{% block content %}
<div class="container" dir="rtl">
  <div class="page-head" style="max-width:720px;margin-inline:auto">
    <div>
      <h1 class="page-title">{% if mode == 'edit' %}تعديل مدرسة{% else %}إنشاء مدرسة جديدة{% endif %}</h1>
      <p class="page-subtitle">املأ بيانات المدرسة كما ستظهر في النظام.</p>
    </div>
  </div>

  <div style="max-width:720px;margin-inline:auto">
    <div class="card">
      <form method="post" enctype="multipart/form-data" class="form-grid">
        {% csrf_token %}

        <div>
          <label for="id_name" style="display:block;font-weight:950;margin-bottom:6px;color:var(--ink)">اسم المدرسة</label>
          {{ form.name }}
        </div>

        <div style="display:grid;grid-template-columns:repeat(auto-fit,minmax(180px,1fr));gap:10px">
          <div>
            <label for="id_code" style="display:block;font-weight:950;margin-bottom:6px;color:var(--ink)">الكود الداخلي</label>
            {{ form.code }}
            <div class="muted" style="font-weight:850;font-size:.9rem;margin-top:6px">كود قصير (بالإنجليزية) لتمييز المدرسة، يُستخدم داخليًا.</div>
          </div>
          <div>
            <label for="id_stage" style="display:block;font-weight:950;margin-bottom:6px;color:var(--ink)">المرحلة</label>
            {{ form.stage }}
          </div>
          <div>
            <label for="id_gender" style="display:block;font-weight:950;margin-bottom:6px;color:var(--ink)">بنين / بنات</label>
            {{ form.gender }}
          </div>
        </div>

        <div style="display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:10px">
          <div>
            <label for="id_city" style="display:block;font-weight:950;margin-bottom:6px;color:var(--ink)">المدينة</label>
            {{ form.city }}
          </div>
          <div>
            <label for="id_phone" style="display:block;font-weight:950;margin-bottom:6px;color:var(--ink)">رقم الجوال</label>
            {{ form.phone }}
          </div>
        </div>

        <div style="display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:10px">
          <div>
            <label for="id_print_primary_color" style="display:block;font-weight:950;margin-bottom:6px;color:var(--ink)">لون قالب الطباعة</label>
            {{ form.print_primary_color }}
            <div class="muted" style="font-weight:850;font-size:.9rem;margin-top:6px">لون رئيسي لقالب الطباعة (يمكن تغييره لاحقًا من إعدادات المدرسة).</div>
          </div>
          <div>
            <label for="id_logo_file" style="display:block;font-weight:950;margin-bottom:6px;color:var(--ink)">رفع الشعار (اختياري)</label>
            {{ form.logo_file }}
            <div class="muted" style="font-weight:850;font-size:.9rem;margin-top:6px">PNG / JPG / SVG / WEBP.</div>
          </div>
          <div>
            <label for="id_logo_url" style="display:block;font-weight:950;margin-bottom:6px;color:var(--ink)">رابط الشعار (اختياري)</label>
            {{ form.logo_url }}
            <div class="muted" style="font-weight:850;font-size:.9rem;margin-top:6px">يُستخدم إذا لم يتوفر شعار مرفوع.</div>
          </div>
          <div>
            <label for="id_is_active" style="display:block;font-weight:950;margin-bottom:6px;color:var(--ink)">الحالة</label>
            {{ form.is_active }}
          </div>
        </div>

        <div>
          <button type="submit" class="btn btn-primary">حفظ</button>
        </div>
      </form>
    </div>
  </div>
</div>
{% endblock %}
