{# reports/templates/reports/admin_dashboard.html (Ø£Ùˆ Ø§Ø³Ù… Ù…Ù„ÙÙƒ Ø§Ù„Ø­Ø§Ù„ÙŠ) #}
{% extends "base.html" %}
{% load static %}

{% block title %}Ù„ÙˆØ­Ø© Ø§Ù„Ù…Ø¯ÙŠØ±{% endblock %}

{% block head %}
<style>
  /* =========================================================
     Admin Dashboard (Scoped)
     - Ø³ÙƒÙˆØ¨ Ø¯Ø§Ø®Ù„ .dash-wrap Ù„ØªØ¬Ù†Ø¨ ØªØ¹Ø§Ø±Ø¶Ø§Øª app.css
     - Ù…ØªÙˆØ§ÙÙ‚ Ù…Ø¹ data-theme (Ø¨Ø¯Ù„ prefers-color-scheme)
     - Ø¨Ø¯ÙˆÙ† Ù„Ù…Ø³ :root Ø£Ùˆ ØªØ¹Ø±ÙŠÙØ§Øª Ø¹Ø§Ù…Ø© Ù…Ø«Ù„ .btn / .card
     ========================================================= */

  .dash-wrap{max-width:1100px;margin:auto;padding:14px}

  .dash-hd{
    display:flex;
    justify-content:space-between;
    align-items:flex-start;
    gap:12px;
    flex-wrap:wrap;
  }
  .dash-title{
    margin:0;
    font-weight:950;
    font-size:1.25rem;
    color:var(--ink);
  }
  .dash-sub{
    margin:6px 0 0;
    color:var(--muted);
    font-weight:800;
  }

  /* KPIs */
  .dash-kpis{
    display:grid;
    gap:12px;
    margin-top:12px;
    grid-template-columns: repeat(2, minmax(0,1fr));
  }
  @media(min-width:700px){
    .dash-kpis{grid-template-columns:repeat(5,minmax(0,1fr))}
  }

  .dash-kpi{
    background:var(--card);
    border:1px solid var(--line);
    border-radius:14px;
    padding:16px;
    box-shadow:0 10px 26px rgba(2,6,23,.08);
    position:relative;
    overflow:hidden;
    transition: var(--t-fast);
  }
  .dash-kpi:before{
    content:"";
    position:absolute;
    inset:0 auto auto 0;
    height:4px;
    width:100%;
    background:linear-gradient(90deg,var(--brand),var(--accent));
    opacity:.85;
  }
  .dash-kpi:hover{
    transform:translateY(-2px);
    box-shadow:0 18px 40px rgba(2,6,23,.12);
  }
  .dash-kpi .num{font-weight:950;font-size:1.35rem;color:var(--brand)}
  .dash-kpi .lbl{color:var(--muted);font-weight:850;margin-top:6px}

  /* Tiles */
  .dash-grid{
    display:grid;
    gap:14px;
    margin-top:16px;
  }
  @media(min-width:900px){
    .dash-grid{grid-template-columns:1fr 1fr}
  }

  .dash-tile{
    display:flex;
    gap:12px;
    align-items:center;
    background:var(--card);
    border:1px solid var(--line);
    border-radius:14px;
    padding:16px;
    text-decoration:none;
    color:inherit;
    box-shadow:0 10px 26px rgba(2,6,23,.08);
    transition:transform .12s ease, box-shadow .12s ease, border-color .12s ease, background .12s ease;
    position:relative;
  }
  .dash-tile:hover{
    transform:translateY(-2px);
    border-color:rgba(37,99,235,.25);
    background:rgba(37,99,235,.04);
    box-shadow:0 18px 40px rgba(2,6,23,.12);
  }
  .dash-tile:focus-visible{
    outline:none;
    box-shadow:0 0 0 4px rgba(37,99,235,.20), 0 18px 40px rgba(2,6,23,.12);
  }
  .dash-tile.disabled{
    opacity:.6;
    pointer-events:none;
    transform:none;
  }
  .dash-tile .arrow{
    margin-inline-start:auto;
    color:var(--muted);
    font-weight:950;
    opacity:.8;
  }

  .dash-ico{
    width:46px;height:46px;border-radius:12px;
    display:grid;place-items:center;
    color:#fff;font-weight:950;
    flex:0 0 auto;
  }
  .b1{background:linear-gradient(135deg,#2563eb,#60a5fa)}
  .b2{background:linear-gradient(135deg,#10b981,#34d399)}
  .b3{background:linear-gradient(135deg,#7c3aed,#a78bfa)}
  .b4{background:linear-gradient(135deg,#f59e0b,#fbbf24)}
  .b5{background:linear-gradient(135deg,#0ea5e9,#22d3ee)}
  .b6{background:linear-gradient(135deg,#8b5cf6,#7c3aed)}
  .b7{background:linear-gradient(135deg,#f97316,#ea580c)}

  .dash-tile-title{
    font-weight:950;
    margin:0;
    color:var(--ink);
    font-size:1.05rem;
  }
  .dash-muted{
    margin-top:4px;
    color:var(--muted);
    font-weight:800;
  }

  /* Dark mode (Ù…Ø¹ data-theme) */
  html[data-theme="dark"] .dash-wrap .dash-tile:hover{
    background:rgba(59,130,246,.10);
    border-color:rgba(59,130,246,.25);
  }
  html[data-theme="dark"] .dash-wrap .dash-kpi,
  html[data-theme="dark"] .dash-wrap .dash-tile{
    box-shadow:0 10px 30px rgba(0,0,0,.22);
  }

  /* Reduce motion */
  @media (prefers-reduced-motion: reduce){
    .dash-wrap .dash-kpi,
    .dash-wrap .dash-tile{
      transition:none !important;
    }
    .dash-wrap .dash-kpi:hover,
    .dash-wrap .dash-tile:hover{
      transform:none !important;
    }
  }
</style>
{% endblock %}

{% block content %}
<div class="dash-wrap" dir="rtl">
  <header class="dash-hd">
    <div>
      <h1 class="dash-title">Ù„ÙˆØ­Ø© Ø§Ù„Ù…Ø¯ÙŠØ±</h1>
      <p class="dash-sub">Ù†Ø¸Ø±Ø© Ø³Ø±ÙŠØ¹Ø© Ø¹Ù„Ù‰ Ø¥Ø­ØµØ§Ø¡Ø§Øª Ø§Ù„Ù…Ø¯Ø±Ø³Ø© ÙˆØ¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø­ØªÙˆÙ‰</p>
    </div>
  </header>

  <section class="dash-kpis" aria-label="Ù…Ø¤Ø´Ø±Ø§Øª Ø³Ø±ÙŠØ¹Ø©">
    <div class="dash-kpi">
      <div class="num">{{ reports_count|default:"0" }}</div>
      <div class="lbl">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ±</div>
    </div>

    <div class="dash-kpi">
      <div class="num">{{ teachers_count|default:"0" }}</div>
      <div class="lbl">Ø§Ù„Ù…Ø¹Ù„Ù‘Ù…ÙˆÙ†</div>
    </div>

    <div class="dash-kpi">
      <div class="num">{{ tickets_total|default:"0" }}</div>
      <div class="lbl">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø·Ù„Ø¨Ø§Øª</div>
    </div>

    <div class="dash-kpi">
      <div class="num">{{ tickets_open|default:"0" }}</div>
      <div class="lbl">Ø·Ù„Ø¨Ø§Øª Ø¬Ø¯ÙŠØ¯Ø©/Ù‚ÙŠØ¯</div>
    </div>

    <div class="dash-kpi">
      <div class="num">{{ reporttypes_count|default:"0" }}</div>
      <div class="lbl">Ø£Ù†ÙˆØ§Ø¹ Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ±</div>
    </div>
  </section>

  <section class="dash-grid" aria-label="Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª">
    <a class="dash-tile" href="{% url 'reports:admin_reports' %}">
      <div class="dash-ico b1" aria-hidden="true">ğŸ“„</div>
      <div>
        <div class="dash-tile-title">Ø¬Ù…ÙŠØ¹ Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ±</div>
        <div class="dash-muted">Ø¹Ø±Ø¶/ØªØµÙÙŠØ© ÙˆØ·Ø¨Ø§Ø¹Ø©</div>
      </div>
      <span class="arrow" aria-hidden="true">â€¹</span>
    </a>

    {# ØµÙ†Ø¯ÙˆÙ‚ Ø§Ù„Ø·Ù„Ø¨Ø§Øª: Ù„Ùˆ Ø§Ù„Ø§Ø³Ù… Ù…Ø®ØªÙ„Ù Ø¹Ù†Ø¯Ùƒ ØºÙŠÙ‘Ø±Ù‡ Ù‡Ù†Ø§ #}
    {% url 'reports:tickets_inbox' as inbox_url %}
    {% if inbox_url %}
      <a class="dash-tile" href="{{ inbox_url }}">
        <div class="dash-ico b2" aria-hidden="true">ğŸ“¬</div>
        <div>
          <div class="dash-tile-title">ØµÙ†Ø¯ÙˆÙ‚ Ø§Ù„Ø·Ù„Ø¨Ø§Øª</div>
          <div class="dash-muted">ÙƒÙ„ Ø§Ù„Ø·Ù„Ø¨Ø§Øª ÙˆØ­Ø§Ù„Ø§ØªÙ‡Ø§</div>
        </div>
        <span class="arrow" aria-hidden="true">â€¹</span>
      </a>
    {% else %}
      <div class="dash-tile disabled" aria-disabled="true">
        <div class="dash-ico b2" aria-hidden="true">ğŸ“¬</div>
        <div>
          <div class="dash-tile-title">ØµÙ†Ø¯ÙˆÙ‚ Ø§Ù„Ø·Ù„Ø¨Ø§Øª</div>
          <div class="dash-muted">Ø§Ù„Ø±Ø§Ø¨Ø· ØºÙŠØ± Ù…ÙØ¹Ù‘Ù„ Ø­Ø§Ù„ÙŠØ§Ù‹</div>
        </div>
        <span class="arrow" aria-hidden="true">â€”</span>
      </div>
    {% endif %}

    <a class="dash-tile" href="{% url 'reports:manage_teachers' %}">
      <div class="dash-ico b4" aria-hidden="true">ğŸ‘©â€ğŸ«</div>
      <div>
        <div class="dash-tile-title">Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø¹Ù„Ù‘Ù…ÙŠÙ†</div>
        <div class="dash-muted">Ø¥Ø¶Ø§ÙØ©/ØªØ¹Ø¯ÙŠÙ„/Ø­Ø°Ù</div>
      </div>
      <span class="arrow" aria-hidden="true">â€¹</span>
    </a>

    <a class="dash-tile" href="{% url 'reports:achievement_school_files' %}">
      <div class="dash-ico b6" aria-hidden="true">ğŸ“˜</div>
      <div>
        <div class="dash-tile-title">Ù…Ù„ÙØ§Øª Ø§Ù„Ø¥Ù†Ø¬Ø§Ø²</div>
        <div class="dash-muted">Ø¹Ø±Ø¶ Ù…Ù„ÙØ§Øª Ø§Ù„Ù…Ø¹Ù„Ù…ÙŠÙ† ÙˆØ§Ø¹ØªÙ…Ø§Ø¯Ù‡Ø§</div>
      </div>
      <span class="arrow" aria-hidden="true">â€¹</span>
    </a>

    {% if CAN_SEND_NOTIFICATIONS and SEND_NOTIFICATION_URL %}
      <a class="dash-tile" href="{{ SEND_NOTIFICATION_URL }}">
        <div class="dash-ico b5" aria-hidden="true">ğŸ“£</div>
        <div>
          <div class="dash-tile-title">Ø¥Ø±Ø³Ø§Ù„ Ø¥Ø´Ø¹Ø§Ø±</div>
          <div class="dash-muted">Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ù„Ù„Ù…Ø¹Ù„Ù…ÙŠÙ†/Ø§Ù„Ø£Ù‚Ø³Ø§Ù…</div>
        </div>
        <span class="arrow" aria-hidden="true">â€¹</span>
      </a>
    {% endif %}

    <a class="dash-tile" href="{% url 'reports:departments_list' %}">
      <div class="dash-ico b3" aria-hidden="true">ğŸ·ï¸</div>
      <div>
        <div class="dash-tile-title">Ø§Ù„Ø£Ù‚Ø³Ø§Ù…</div>
        <div class="dash-muted">
          {% if has_dept_model %}Ø¥Ø¶Ø§ÙØ©/ØªØ¹Ø¯ÙŠÙ„/Ø­Ø°Ù/Ø£Ø¹Ø¶Ø§Ø¡{% else %}Ø¥Ø³Ù†Ø§Ø¯ Ø§Ù„Ø£Ø¹Ø¶Ø§Ø¡ ÙÙ‚Ø·{% endif %}
        </div>
      </div>
      <span class="arrow" aria-hidden="true">â€¹</span>
    </a>

    {% if has_reporttype %}
      <a class="dash-tile" href="{% url 'reports:reporttypes_list' %}">
        <div class="dash-ico b5" aria-hidden="true">ğŸ§©</div>
        <div>
          <div class="dash-tile-title">Ø£Ù†ÙˆØ§Ø¹ Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ±</div>
          <div class="dash-muted">Ø¥Ø¶Ø§ÙØ©/ØªØ¹Ø¯ÙŠÙ„/Ø­Ø°Ù Ø§Ù„Ø£Ù†ÙˆØ§Ø¹</div>
        </div>
        <span class="arrow" aria-hidden="true">â€¹</span>
      </a>
    {% else %}
      <div class="dash-tile disabled" aria-disabled="true">
        <div class="dash-ico b5" aria-hidden="true">ğŸ§©</div>
        <div>
          <div class="dash-tile-title">Ø£Ù†ÙˆØ§Ø¹ Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ±</div>
          <div class="dash-muted">ÙØ¹Ù‘Ù„ ReportType ÙˆØ§Ù„Ø±ÙˆØ§Ø¨Ø· Ø§Ù„Ø®Ø§ØµØ© Ø¨Ù‡</div>
        </div>
        <span class="arrow" aria-hidden="true">â€”</span>
      </div>
    {% endif %}

    {% if active_school %}
      {% url 'reports:school_settings' as school_settings_url %}
      {% if school_settings_url %}
        <a class="dash-tile" href="{{ school_settings_url }}">
          <div class="dash-ico b4" aria-hidden="true">âš™ï¸</div>
          <div>
            <div class="dash-tile-title">Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù…Ø¯Ø±Ø³Ø©</div>
            <div class="dash-muted">ØªØ¹Ø¯ÙŠÙ„ Ø§Ø³Ù… Ø§Ù„Ù…Ø¯Ø±Ø³Ø© ÙˆØ´Ø¹Ø§Ø±Ù‡Ø§</div>
          </div>
          <span class="arrow" aria-hidden="true">â€¹</span>
        </a>
      {% else %}
        <div class="dash-tile disabled" aria-disabled="true">
          <div class="dash-ico b4" aria-hidden="true">âš™ï¸</div>
          <div>
            <div class="dash-tile-title">Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù…Ø¯Ø±Ø³Ø©</div>
            <div class="dash-muted">Ø§Ù„Ø±Ø§Ø¨Ø· ØºÙŠØ± Ù…ÙØ¹Ù‘Ù„ Ø­Ø§Ù„ÙŠØ§Ù‹</div>
          </div>
          <span class="arrow" aria-hidden="true">â€”</span>
        </div>
      {% endif %}

      <a class="dash-tile" href="{% url 'reports:my_subscription' %}">
        <div class="dash-ico b6" aria-hidden="true">ğŸ’³</div>
        <div>
          <div class="dash-tile-title">Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ ÙˆØ§Ù„Ø¨Ø§Ù‚Ø§Øª</div>
          <div class="dash-muted">Ø­Ø§Ù„Ø© Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ ÙˆØªØ¬Ø¯ÙŠØ¯ Ø§Ù„Ø¨Ø§Ù‚Ø©</div>
        </div>
        <span class="arrow" aria-hidden="true">â€¹</span>
      </a>
    {% endif %}

    <a class="dash-tile" href="{% url 'reports:my_support_tickets' %}">
      <div class="dash-ico b7" aria-hidden="true">ğŸ§</div>
      <div>
        <div class="dash-tile-title">Ø§Ù„Ø¯Ø¹Ù… Ø§Ù„ÙÙ†ÙŠ Ù„Ù„Ù…Ù†ØµØ©</div>
        <div class="dash-muted">ØªÙˆØ§ØµÙ„ Ù…Ø¹ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù†Ø¸Ø§Ù…</div>
      </div>
      <span class="arrow" aria-hidden="true">â€¹</span>
    </a>

    <div class="dash-tile disabled" aria-disabled="true">
      <div class="dash-ico b7" aria-hidden="true">ğŸ“œ</div>
      <div>
        <div class="dash-tile-title">Ø³Ø¬Ù„ Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª</div>
        <div class="dash-muted">Ø§Ù„Ø±Ø§Ø¨Ø· ØºÙŠØ± Ù…ÙØ¹Ù‘Ù„ Ø­Ø§Ù„ÙŠØ§Ù‹</div>
      </div>
      <span class="arrow" aria-hidden="true">â€”</span>
    </div>
  </section>
</div>
{% endblock %}
